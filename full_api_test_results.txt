

--- Health Check ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/health"

{"components":{"elasticsearch":{"status":"healthy"},"redis":{"status":"healthy"}},"status":"healthy","timestamp":"2025-12-22T14:20:50.301949275Z"}

--- Create App ---

Body: {"app_name": "FullTestApp", "webhook_url": "http://host.docker.internal:8090/webhook"}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/apps" -H "Content-Type: application/json" -d "@req_body.txt"

{"data":{"app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","app_name":"FullTestApp","api_key":"frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"api_key_generated_at":"2025-12-22T14:20:50Z","created_at":"2025-12-22T14:20:50Z","updated_at":"2025-12-22T14:20:50Z"},"message":"Application created successfully. Save the API key securely - it won't be shown again in full.","success":true}

--- Get App ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/apps/0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4"

{"data":{"app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","app_name":"FullTestApp","api_key":"frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"api_key_generated_at":"2025-12-22T14:20:50Z","created_at":"2025-12-22T14:20:50Z","updated_at":"2025-12-22T14:20:50Z"},"success":true}

--- List Apps ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/apps?page=1&page_size=10"

{"data":{"applications":[{"app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","app_name":"FullTestApp","api_key":"***mpBjUGg=","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"api_key_generated_at":"2025-12-22T14:20:50Z","created_at":"2025-12-22T14:20:50Z","updated_at":"2025-12-22T14:20:50Z"},{"app_id":"e749cee7-3af8-45cf-b65f-5c61b4e432c0","app_name":"Monkeys UI","api_key":"***wA6pjoE=","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"api_key_generated_at":"2025-12-22T14:06:19Z","created_at":"2025-12-22T14:06:19Z","updated_at":"2025-12-22T14:06:25Z"},{"app_id":"8b6b999a-ee3f-47b1-9f2a-7c816b9bf30f","app_name":"FreshManualApp","api_key":"***66408682","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":10,"default_template":"","enable_webhooks":true,"enable_analytics":false},"api_key_generated_at":"2025-12-22T13:04:22Z","created_at":"2025-12-22T13:04:22Z","updated_at":"2025-12-22T13:04:42Z"}],"total_count":3,"page":1,"page_size":10},"success":true}

--- Update App ---

Body: {"app_name": "FullTestApp Updated"}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/apps/0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4" -H "Content-Type: application/json" -d "@req_body.txt"

{"data":{"app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","app_name":"FullTestApp Updated","api_key":"frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=","webhook_url":"http://host.docker.internal:8090/webhook","settings":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"api_key_generated_at":"2025-12-22T14:20:50Z","created_at":"2025-12-22T14:20:50Z","updated_at":"2025-12-22T14:20:51Z"},"success":true}

--- Get Settings ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/apps/0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4/settings"

{"data":{"rate_limit":1000,"retry_attempts":3,"default_template":"","enable_webhooks":false,"enable_analytics":false},"success":true}

--- Update Settings ---

Body: {"rate_limit": 500, "retry_attempts": 5}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/apps/0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4/settings" -H "Content-Type: application/json" -d "@req_body.txt"

{"message":"Settings updated successfully","success":true}

--- Create User ---

Body: {"external_user_id": "u-test-01", "email": "testuser@example.com", "preferences": {"email_enabled": true}}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/users" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"data":{"user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","external_user_id":"u-test-01","email":"testuser@example.com","preferences":{"email_enabled":true,"push_enabled":null,"sms_enabled":null,"quiet_hours":{"start":"","end":""},"dnd":false,"categories":null,"daily_limit":0},"created_at":"2025-12-22T14:20:52Z","updated_at":"2025-12-22T14:20:52Z"},"success":true}

--- Get User ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"data":{"user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","external_user_id":"u-test-01","email":"testuser@example.com","preferences":{"email_enabled":true,"push_enabled":null,"sms_enabled":null,"quiet_hours":{"start":"","end":""},"dnd":false,"categories":null,"daily_limit":0},"created_at":"2025-12-22T14:20:52Z","updated_at":"2025-12-22T14:20:52Z"},"success":true}

--- List Users ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/users?page=1&page_size=10" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"data":{"users":[{"user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","external_user_id":"u-test-01","email":"testuser@example.com","preferences":{"email_enabled":true,"push_enabled":null,"sms_enabled":null,"quiet_hours":{"start":"","end":""},"dnd":false,"categories":null,"daily_limit":0},"created_at":"2025-12-22T14:20:52Z","updated_at":"2025-12-22T14:20:52Z"}],"total_count":1,"page":1,"page_size":10},"success":true}

--- Update User ---

Body: {"email": "updated@example.com"}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"data":{"user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","external_user_id":"u-test-01","email":"updated@example.com","preferences":{"email_enabled":true,"push_enabled":null,"sms_enabled":null,"quiet_hours":{"start":"","end":""},"dnd":false,"categories":null,"daily_limit":0},"created_at":"2025-12-22T14:20:52Z","updated_at":"2025-12-22T14:20:52Z"},"success":true}

--- Add Device ---

Body: {"platform": "ios", "token": "device-token-123", "active": true}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6/devices" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"message":"Device added successfully","success":true}

--- Get Devices ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6/devices" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"data":[{"device_id":"2533fa31-5eb5-4956-b532-6254b8834920","platform":"ios","token":"device-token-123","active":true,"registered_at":"2025-12-22T14:20:52.663937592Z","last_seen":"0001-01-01T00:00:00Z"}],"success":true}

--- Get Preferences ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6/preferences" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"data":{"email_enabled":true,"push_enabled":null,"sms_enabled":null,"quiet_hours":{"start":"","end":""},"dnd":false,"categories":null,"daily_limit":0},"success":true}

--- Update Preferences ---

Body: {"email_enabled": true, "push_enabled": true}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6/preferences" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"message":"Preferences updated successfully","success":true}

--- Create Template ---

Body: {"app_id": "0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4", "name": "welcome_template", "channel": "email", "subject": "Welcome!", "body": "Hello {{.name}}, welcome to our service.", "variables": ["name"]}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/templates" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","name":"welcome_template","description":"","channel":"email","subject":"Welcome!","body":"Hello {{.name}}, welcome to our service.","variables":["name"],"metadata":null,"version":1,"status":"active","locale":"","created_by":"","updated_by":"","created_at":"2025-12-22T14:20:55.154154502Z","updated_at":"2025-12-22T14:20:55.154154703Z"}

--- List Templates ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/templates?page=1&page_size=10" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"templates":[{"id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","name":"welcome_template","description":"","channel":"email","subject":"Welcome!","body":"Hello {{.name}}, welcome to our service.","variables":["name"],"metadata":null,"version":1,"status":"active","locale":"","created_by":"","updated_by":"","created_at":"2025-12-22T14:20:55.154154502Z","updated_at":"2025-12-22T14:20:55.154154703Z"},{"id":"e3a0ea73-d4d0-40db-8c34-d179e4c0de43","app_id":"8b6b999a-ee3f-47b1-9f2a-7c816b9bf30f","name":"FreshTemplate","description":"","channel":"webhook","subject":"Manual Test","body":"Hi {{name}}, this is the fresh manual verification.","variables":["name"],"metadata":null,"version":1,"status":"active","locale":"","created_by":"","updated_by":"","created_at":"2025-12-22T13:05:05.818668328Z","updated_at":"2025-12-22T13:05:05.818668538Z"}],"total":2,"limit":50,"offset":0}

--- Get Template ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/templates/5ebcae97-523f-422c-b29e-f9fe3c4cf72c" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","name":"welcome_template","description":"","channel":"email","subject":"Welcome!","body":"Hello {{.name}}, welcome to our service.","variables":["name"],"metadata":null,"version":1,"status":"active","locale":"","created_by":"","updated_by":"","created_at":"2025-12-22T14:20:55.154154502Z","updated_at":"2025-12-22T14:20:55.154154703Z"}

--- Update Template ---

Body: {"body": "Hello {{.name}}, welcome back!"}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/templates/5ebcae97-523f-422c-b29e-f9fe3c4cf72c" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","name":"welcome_template","description":"","channel":"email","subject":"Welcome!","body":"Hello {{.name}}, welcome back!","variables":["name"],"metadata":null,"version":1,"status":"active","locale":"","created_by":"","updated_by":"","created_at":"2025-12-22T14:20:55.154154502Z","updated_at":"2025-12-22T14:20:55.562542884Z"}

--- Render Template ---

Body: {"data": {"name": "John Doe"}}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/templates/5ebcae97-523f-422c-b29e-f9fe3c4cf72c/render" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"rendered_body":"Hello John Doe, welcome back!"}

--- Send Notification ---

Body: {"user_id": "dfdefa72-aa66-4cc3-a013-f3869918ebe6", "template_id": "5ebcae97-523f-422c-b29e-f9fe3c4cf72c", "channel": "email", "priority": "high", "title": "Default Title", "body": "Default Body", "data": {"name": "John"}}

CMD: curl.exe -s -X POST "http://localhost:8080/v1/notifications" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"notification_id":"1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","channel":"email","priority":"high","status":"queued","title":"Default Title","body":"Default Body","data":{"name":"John"},"template_id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","retry_count":0,"created_at":"2025-12-22T14:20:55.860413844Z","updated_at":"2025-12-22T14:20:55.860413974Z"}

--- List Notifications ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/notifications?page=1&page_size=10" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"notifications":[{"notification_id":"1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","channel":"email","priority":"high","status":"processing","title":"Default Title","body":"Default Body","data":{"name":"John"},"template_id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","retry_count":0,"created_at":"2025-12-22T14:20:55.860413844Z","updated_at":"2025-12-22T14:20:55.951213903Z"}],"total":1,"page":1,"page_size":10}

--- Get Notification ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/notifications/1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"notification_id":"1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","channel":"email","priority":"high","status":"sent","title":"Default Title","body":"Default Body","data":{"name":"John"},"template_id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","sent_at":"2025-12-22T14:20:56.156929148Z","retry_count":0,"created_at":"2025-12-22T14:20:55.860413844Z","updated_at":"2025-12-22T14:20:56.156927785Z"}

--- Update Notification Status ---

Body: {"status": "read"}

CMD: curl.exe -s -X PUT "http://localhost:8080/v1/notifications/1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593/status" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg=" -H "Content-Type: application/json" -d "@req_body.txt"

{"notification_id":"1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593","app_id":"0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4","user_id":"dfdefa72-aa66-4cc3-a013-f3869918ebe6","channel":"email","priority":"high","status":"read","title":"Default Title","body":"Default Body","data":{"name":"John"},"template_id":"5ebcae97-523f-422c-b29e-f9fe3c4cf72c","sent_at":"2025-12-22T14:20:56.156929148Z","read_at":"2025-12-22T14:20:56.330137689Z","retry_count":0,"created_at":"2025-12-22T14:20:55.860413844Z","updated_at":"2025-12-22T14:20:56.330137268Z"}

--- Retry Notification ---

CMD: curl.exe -s -X POST "http://localhost:8080/v1/notifications/1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593/retry" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"error":"notification cannot be retried"}

--- Cancel Notification ---

CMD: curl.exe -s -X DELETE "http://localhost:8080/v1/notifications/1c59eba2-b47a-4b06-9e0e-1c6d1eb2e593" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"error":"cannot cancel notification in final state read"}

--- Queue Stats ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/admin/queues/stats" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"stats":{"frn:queue:dlq":4,"frn:queue:high":0,"frn:queue:low":0,"frn:queue:normal":0,"frn:queue:retry":0}}

--- DLQ List ---

CMD: curl.exe -s -X GET "http://localhost:8080/v1/admin/queues/dlq" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"items":[{"notification_id":"60613101-dfdf-4ab3-b9ce-4bc06026a0c1","priority":"normal","retry_count":0,"enqueued_at":"2025-12-22T14:08:21.5990918Z","reason":"max retries exceeded: provider send failed: no webhook URL for user 10e37607-90f0-4ed3-8068-75d9f9c6d6b9","timestamp":"2025-12-22T14:08:23.39299127Z"},{"notification_id":"78de1297-4ca7-4b47-ae8e-32df10185fc0","priority":"high","retry_count":0,"enqueued_at":"2025-12-22T13:36:08.563633718Z","reason":"max retries exceeded: provider send failed: Post \"http://host.docker.internal:8092/webhook\": dial tcp 192.168.65.254:8092: connect: connection refused","timestamp":"2025-12-22T13:36:11.294891317Z"},{"notification_id":"001c91b0-21ff-4b33-96a9-531caa18882e","priority":"high","retry_count":0,"enqueued_at":"2025-12-22T13:36:08.598391841Z","reason":"max retries exceeded: provider send failed: Post \"http://host.docker.internal:8091/webhook\": dial tcp 192.168.65.254:8091: connect: connection refused","timestamp":"2025-12-22T13:36:11.023923172Z"},{"notification_id":"0cadf1f8-187d-44f7-960f-8bebc2a38c9c","priority":"high","retry_count":0,"enqueued_at":"2025-12-22T13:36:08.564511028Z","reason":"max retries exceeded: provider send failed: Post \"http://host.docker.internal:8093/webhook\": dial tcp 192.168.65.254:8093: connect: connection refused","timestamp":"2025-12-22T13:36:11.005798597Z"}]}

--- Delete User ---

CMD: curl.exe -s -X DELETE "http://localhost:8080/v1/users/dfdefa72-aa66-4cc3-a013-f3869918ebe6" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="

{"message":"User deleted successfully","success":true}

--- Delete Template ---

CMD: curl.exe -s -X DELETE "http://localhost:8080/v1/templates/5ebcae97-523f-422c-b29e-f9fe3c4cf72c" -H "Authorization: Bearer frn_XW2-xaqCJIiGZI4VGwIZtpuMdUoJz33RkIgqmpBjUGg="


--- Delete App ---

CMD: curl.exe -s -X DELETE "http://localhost:8080/v1/apps/0eb1e1d1-970a-4de7-b2fc-1721fbdb60b4"

{"message":"Application deleted successfully","success":true}
